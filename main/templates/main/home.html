{% extends 'main/base.html' %}
{% load static %}

{% block title %}SAMARTHAN - Empower Change{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<section class="hero">
    <div class="slideshow-container">
        <div class="slide fade">
            <img src="https://images.unsplash.com/photo-1427504494785-3a9ca7044f45?w=1600" 
                 alt="Children learning together">
        </div>
        <div class="slide fade">
            <img src="https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=1600" 
                 alt="Community service">
        </div>
        <div class="slide fade">
            <img src="https://images.unsplash.com/photo-1532629345422-7515f3d16bb6?w=1600" 
                 alt="Donation and charity work">
        </div>
        <a class="prev" onclick="changeSlide(-1)">❮</a>
        <a class="next" onclick="changeSlide(1)">❯</a>
        <div class="dots">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>
    </div>
    <div class="hero-content">
        <h1>Empower Change</h1>
        <p>Join us in supporting NGOs and making a difference through your generous donations.</p>
        <div class="hero-buttons">
            <a href="{% url 'ngo_discovery' %}" class="btn primary-btn">Donate Now</a>
            <a href="#features" class="btn secondary-btn">Learn More</a>
        </div>
    </div>
    <a href="#features" class="scroll-indicator">
        <div class="arrow"></div>
    </a>
</section>

<section id="features" class="features">
    <div class="section-header reveal">
        <h2>Platform Features</h2>
        <p>Discover how SAMARTHAN makes donating to NGOs easier, transparent, and impactful.</p>
    </div>
    
    <div class="feature-card reveal">
        <div class="feature-text">
            <h3>Easy Donations</h3>
            <p>Our platform simplifies the donation process with a user-friendly interface and secure payment options.</p>
            <button onclick="openModal('easyDonationsModal')" class="btn primary-btn">Learn More</button>
        </div>
        <div class="feature-image">
            <img src="https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?w=800" 
                 alt="Easy and secure donation process">
        </div>
    </div>
    
    <div class="feature-card reverse reveal">
        <div class="feature-text">
            <h3>Trusted Donation Network</h3>
            <p>We verify all NGOs on our platform to ensure your donations reach legitimate organizations making real impact.</p>
            <button onclick="openModal('trustedNetworkModal')" class="btn primary-btn">Learn More</button>
        </div>
        <div class="feature-image">
            <img src="https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?w=800" 
                 alt="Trusted NGO verification process">
        </div>
    </div>
    
    <div class="feature-card reveal">
        <div class="feature-text">
            <h3>Receipt Generation and Tracking</h3>
            <p>All donations on SAMARTHAN generate proper receipts and detailed donation reports to track your contributions.</p>
            <button onclick="openModal('receiptTrackingModal')" class="btn primary-btn">Learn More</button>
        </div>
        <div class="feature-image">
            <img src="https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?w=800" 
                 alt="Digital donation tracking system">
        </div>
    </div>
</section>

<!-- Feature Modals -->
<div id="easyDonationsModal" class="feature-modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('easyDonationsModal')">&times;</span>
        <div class="modal-header">
            <h2><i class="fas fa-hand-holding-heart"></i> Easy Donations</h2>
        </div>
        <div class="modal-body">
            <div class="feature-detail">
                <h3>Simple 3-Step Process</h3>
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Choose Your NGO</h4>
                        <p>Browse through our listed NGOs and select the cause you want to support. Filter by categories like Education, Healthcare, Food, Clothing, Shelter, or Animal Rights.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Enter Bank Details</h4>
                        <p>Provide your bank account details and the amount you wish to donate. Your information is kept secure and confidential.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Complete Donation</h4>
                        <p>Confirm your donation and receive a digital receipt. Your contribution will be directly transferred to the NGO's bank account.</p>
                    </div>
                </div>
            </div>
            <div class="feature-benefits">
                <h3>Benefits</h3>
                <ul>
                    <li>Simple and straightforward donation process</li>
                    <li>Direct bank transfer to NGOs</li>
                    <li>Secure handling of bank information</li>
                    <li>Digital receipt generation</li>
                    <li>Easy donation tracking</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div id="trustedNetworkModal" class="feature-modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('trustedNetworkModal')">&times;</span>
        <div class="modal-header">
            <h2><i class="fas fa-shield-alt"></i> Trusted Donation Network</h2>
        </div>
        <div class="modal-body">
            <div class="feature-detail">
                <h3>Our NGO Network</h3>
                <div class="verification-step">
                    <h4>Registration Information</h4>
                    <p>NGOs provide their official registration details and documentation when joining our platform.</p>
                </div>
                <div class="verification-step">
                    <h4>Transparent Profiles</h4>
                    <p>Each NGO maintains a detailed profile showcasing their mission, activities, and contact information.</p>
                </div>
                <div class="verification-step">
                    <h4>Direct Communication</h4>
                    <p>Connect directly with NGOs through our platform to learn more about their work and impact.</p>
                </div>
            </div>
            <div class="trust-indicators">
                <h3>Platform Features</h3>
                <ul>
                    <li>Detailed NGO profiles with mission statements</li>
                    <li>Category-based NGO discovery</li>
                    <li>Direct bank account transfers</li>
                    <li>Contact information for each NGO</li>
                    <li>Donation history tracking</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div id="receiptTrackingModal" class="feature-modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('receiptTrackingModal')">&times;</span>
        <div class="modal-header">
            <h2><i class="fas fa-file-alt"></i> Receipt Generation & Tracking</h2>
        </div>
        <div class="modal-body">
            <div class="feature-detail">
                <h3>Donation Management System</h3>
                <div class="tracking-feature">
                    <h4>Digital Receipts</h4>
                    <p>Get instant digital receipts for your donations with unique transaction IDs for easy reference.</p>
                </div>
                <div class="tracking-feature">
                    <h4>Donation History</h4>
                    <p>Access your complete donation history, including details of all past contributions and the NGOs you've supported.</p>
                </div>
                <div class="tracking-feature">
                    <h4>Transaction Details</h4>
                    <p>View detailed information about each donation, including date, amount, and recipient NGO details.</p>
                </div>
            </div>
            <div class="tracking-benefits">
                <h3>Key Features</h3>
                <ul>
                    <li>Instant digital receipts</li>
                    <li>Complete donation history</li>
                    <li>Transaction details tracking</li>
                    <li>NGO-wise donation records</li>
                    <li>Downloadable transaction records</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
/* Feature Modal Styles */
.feature-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    overflow-y: auto;
}

.modal-content {
    background-color: #fff;
    margin: 5% auto;
    padding: 0;
    width: 90%;
    max-width: 800px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    position: relative;
    animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
    from {
        transform: translateY(-100px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
    padding: 20px;
    border-radius: 15px 15px 0 0;
}

.modal-header h2 {
    margin: 0;
    font-size: 24px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.modal-body {
    padding: 30px;
}

.close {
    position: absolute;
    right: 20px;
    top: 15px;
    color: white;
    font-size: 30px;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.close:hover {
    transform: rotate(90deg);
}

/* Step Styles */
.step {
    display: flex;
    gap: 20px;
    margin-bottom: 30px;
    align-items: flex-start;
}

.step-number {
    width: 40px;
    height: 40px;
    background: #4CAF50;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    font-weight: bold;
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.step-content h4 {
    margin: 0 0 10px 0;
    color: #333;
}

.step-content p {
    margin: 0;
    color: #666;
}

/* Feature Benefits */
.feature-benefits, .trust-indicators, .tracking-benefits {
    margin-top: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
}

.feature-benefits h3, .trust-indicators h3, .tracking-benefits h3 {
    color: #333;
    margin-top: 0;
}

.feature-benefits ul, .trust-indicators ul, .tracking-benefits ul {
    list-style-type: none;
    padding: 0;
}

.feature-benefits li, .trust-indicators li, .tracking-benefits li {
    margin: 10px 0;
    padding-left: 25px;
    position: relative;
}

.feature-benefits li:before, .trust-indicators li:before, .tracking-benefits li:before {
    content: '✓';
    color: #4CAF50;
    position: absolute;
    left: 0;
    font-weight: bold;
}

/* Verification and Tracking Features */
.verification-step, .tracking-feature {
    margin-bottom: 25px;
    padding: 15px;
    border-left: 4px solid #4CAF50;
    background: #f8f9fa;
}

.verification-step h4, .tracking-feature h4 {
    color: #333;
    margin: 0 0 10px 0;
}

.verification-step p, .tracking-feature p {
    margin: 0;
    color: #666;
}

@media (max-width: 768px) {
    .modal-content {
        margin: 10% auto;
        width: 95%;
    }

    .step {
        flex-direction: column;
        gap: 10px;
    }

    .modal-body {
        padding: 20px;
    }
}
</style>

<script>
    let currentSlideIndex = 1;
    let slideInterval;
    let isTransitioning = false;

    function startSlideshow() {
        showSlides(currentSlideIndex);
        if (slideInterval) {
            clearInterval(slideInterval);
        }
        slideInterval = setInterval(() => {
            if (!isTransitioning) {
                changeSlide(1);
            }
        }, 5000);
    }

    function stopSlideshow() {
        if (slideInterval) {
            clearInterval(slideInterval);
            slideInterval = null;
        }
    }

    function changeSlide(n) {
        if (isTransitioning) return;
        isTransitioning = true;
        showSlides(currentSlideIndex += n);
        setTimeout(() => {
            isTransitioning = false;
        }, 800);
    }

    function currentSlide(n) {
        if (isTransitioning) return;
        isTransitioning = true;
        showSlides(currentSlideIndex = n);
        setTimeout(() => {
            isTransitioning = false;
        }, 800);
    }

    function showSlides(n) {
        let slides = document.getElementsByClassName("slide");
        let dots = document.getElementsByClassName("dot");
        
        if (n > slides.length) {currentSlideIndex = 1}
        if (n < 1) {currentSlideIndex = slides.length}
        
        for (let i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
            slides[i].classList.remove("active");
            dots[i].classList.remove("active");
            dots[i].setAttribute("aria-selected", "false");
        }
        
        slides[currentSlideIndex-1].style.display = "block";
        slides[currentSlideIndex-1].classList.add("active");
        dots[currentSlideIndex-1].classList.add("active");
        dots[currentSlideIndex-1].setAttribute("aria-selected", "true");
    }

    // Start the slideshow when the page loads
    document.addEventListener('DOMContentLoaded', function() {
        startSlideshow();
        // Add scroll reveal animation
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '-50px'
        });

        document.querySelectorAll('.reveal').forEach((el) => observer.observe(el));
    });

    // Pause slideshow when hovering over the container
    document.querySelector('.slideshow-container').addEventListener('mouseenter', stopSlideshow);
    document.querySelector('.slideshow-container').addEventListener('mouseleave', startSlideshow);

    // Add keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft') {
            changeSlide(-1);
        } else if (e.key === 'ArrowRight') {
            changeSlide(1);
        }
    });

    // Modal Functions
    function openModal(modalId) {
        document.getElementById(modalId).style.display = "block";
        document.body.style.overflow = "hidden";
    }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
        document.body.style.overflow = "auto";
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
        if (event.target.classList.contains('feature-modal')) {
            event.target.style.display = "none";
            document.body.style.overflow = "auto";
        }
    }

    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === "Escape") {
            document.querySelectorAll('.feature-modal').forEach(modal => {
                modal.style.display = "none";
            });
            document.body.style.overflow = "auto";
        }
    });
</script>
{% endblock %}